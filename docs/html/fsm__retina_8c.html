<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retina: recepci贸n y transmisi贸n de infrarrojos: common/src/fsm_retina.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Retina: recepci贸n y transmisi贸n de infrarrojos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('fsm__retina_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">fsm_retina.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Retina FSM main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="commands_8h_source.html">commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsm__retina_8h_source.html">fsm_retina.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsm__button_8h_source.html">fsm_button.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsm__tx_8h_source.html">fsm_tx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsm__rx_8h_source.html">fsm_rx.h</a>&quot;</code><br />
</div>
<p><a href="fsm__retina_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfsm__retina__t.html">fsm_retina_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to define the Retina FSM.  <a href="structfsm__retina__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1493910690d9420cf8b135851ed55211"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a1493910690d9420cf8b135851ed55211">COMMANDS_MEMORY_SIZE</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a1493910690d9420cf8b135851ed55211"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a> = 0
, <br />
&#160;&#160;<a class="el" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>
, <br />
&#160;&#160;<a class="el" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e">SLEEP_TX</a>
, <br />
&#160;&#160;<a class="el" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8">SLEEP_RX</a>
<br />
 }</td></tr>
<tr class="separator:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa92912b6265f7b5ea279a89d65672079"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#aa92912b6265f7b5ea279a89d65672079">_process_rgb_code</a> (uint8_t rgb_id, uint32_t code)</td></tr>
<tr class="memdesc:aa92912b6265f7b5ea279a89d65672079"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the color from the code that is received.  <br /></td></tr>
<tr class="separator:aa92912b6265f7b5ea279a89d65672079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa252d6804822c94f8c46898a5c70a255"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#aa252d6804822c94f8c46898a5c70a255">check_short_pressed</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:aa252d6804822c94f8c46898a5c70a255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the button has been pressed fast to send a new command.  <br /></td></tr>
<tr class="separator:aa252d6804822c94f8c46898a5c70a255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659bcc80451aef1447a2b9084a8e7b68"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a659bcc80451aef1447a2b9084a8e7b68">check_long_pressed</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a659bcc80451aef1447a2b9084a8e7b68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the button has been pressed long to change between transmitter and receiver modes.  <br /></td></tr>
<tr class="separator:a659bcc80451aef1447a2b9084a8e7b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27791bcb353fd9bf513cf1fb124a84d5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a27791bcb353fd9bf513cf1fb124a84d5">check_code</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a27791bcb353fd9bf513cf1fb124a84d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there is a new code in the infrared receiver FSM.  <br /></td></tr>
<tr class="separator:a27791bcb353fd9bf513cf1fb124a84d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e569115408f9427a03aad6f4b067bb2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a6e569115408f9427a03aad6f4b067bb2">check_repetition</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a6e569115408f9427a03aad6f4b067bb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there has been a repetition.  <br /></td></tr>
<tr class="separator:a6e569115408f9427a03aad6f4b067bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831d11281556c3d19f17da6088ff7fec"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a831d11281556c3d19f17da6088ff7fec">check_error</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a831d11281556c3d19f17da6088ff7fec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there has been received an erroneous code.  <br /></td></tr>
<tr class="separator:a831d11281556c3d19f17da6088ff7fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c30b8fcfe5b740e745e9b664e872eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a46c30b8fcfe5b740e745e9b664e872eb">check_activity</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a46c30b8fcfe5b740e745e9b664e872eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if any sub fsm is having any activity.  <br /></td></tr>
<tr class="separator:a46c30b8fcfe5b740e745e9b664e872eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aa51c060ad3f32d64ac0e22a4ce333e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a2aa51c060ad3f32d64ac0e22a4ce333e">check_no_activity</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a2aa51c060ad3f32d64ac0e22a4ce333e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the oposite of check_activity function.  <br /></td></tr>
<tr class="separator:a2aa51c060ad3f32d64ac0e22a4ce333e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7660e69573bbf3e75ac151864e165b0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#ae7660e69573bbf3e75ac151864e165b0">do_send_next_msg</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ae7660e69573bbf3e75ac151864e165b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit the next code stored in memory after a short button press.  <br /></td></tr>
<tr class="separator:ae7660e69573bbf3e75ac151864e165b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaadcd4455f8b57c0cd0b3d7fdea7f43"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#adaadcd4455f8b57c0cd0b3d7fdea7f43">do_execute_code</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:adaadcd4455f8b57c0cd0b3d7fdea7f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actuate according to the code received.  <br /></td></tr>
<tr class="separator:adaadcd4455f8b57c0cd0b3d7fdea7f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa65b37d943170fb5357a1f6de4c4d1f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#afa65b37d943170fb5357a1f6de4c4d1f">do_tx_off_rx_on</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:afa65b37d943170fb5357a1f6de4c4d1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the system to receiver mode.  <br /></td></tr>
<tr class="separator:afa65b37d943170fb5357a1f6de4c4d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db678242efba8b80d622d06faa27978"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a1db678242efba8b80d622d06faa27978">do_rx_off_tx_on</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a1db678242efba8b80d622d06faa27978"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the system to transmitter mode.  <br /></td></tr>
<tr class="separator:a1db678242efba8b80d622d06faa27978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d0fd454021efb6078f8daa758ef465"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a06d0fd454021efb6078f8daa758ef465">do_execute_repetition</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a06d0fd454021efb6078f8daa758ef465"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actuate accordingly when receiving a repetition.  <br /></td></tr>
<tr class="separator:a06d0fd454021efb6078f8daa758ef465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f95fb7d2a6655ee7897d0506a294994"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a5f95fb7d2a6655ee7897d0506a294994">do_discard_rx_and_reset</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a5f95fb7d2a6655ee7897d0506a294994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discard and reset the code of the infrared receiver FSM.  <br /></td></tr>
<tr class="separator:a5f95fb7d2a6655ee7897d0506a294994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd17f5bad9f9634896d218e11b2e0f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#abbd17f5bad9f9634896d218e11b2e0f5">do_sleep</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:abbd17f5bad9f9634896d218e11b2e0f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the low power mode.  <br /></td></tr>
<tr class="separator:abbd17f5bad9f9634896d218e11b2e0f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56250a78299de778b68bb8e59e09d76a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a56250a78299de778b68bb8e59e09d76a">fsm_retina_new</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm_button, uint32_t button_press_time, <a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm_tx, <a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm_rx, uint8_t rgb_id)</td></tr>
<tr class="memdesc:a56250a78299de778b68bb8e59e09d76a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new RETINA FSM.  <br /></td></tr>
<tr class="separator:a56250a78299de778b68bb8e59e09d76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f48e93526d839640780ab9fbf699a3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a9f48e93526d839640780ab9fbf699a3b">fsm_retina_init</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this, <a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm_button, uint32_t button_press_time, <a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm_tx, <a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm_rx, uint8_t rgb_id)</td></tr>
<tr class="memdesc:a9f48e93526d839640780ab9fbf699a3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the infrared transmitter FSM.  <br /></td></tr>
<tr class="separator:a9f48e93526d839640780ab9fbf699a3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abcab6b8f411c244c4ac5a445f0f735f3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#abcab6b8f411c244c4ac5a445f0f735f3">color_mem</a> = 0x0</td></tr>
<tr class="separator:abcab6b8f411c244c4ac5a445f0f735f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7b2830dd7e174142d33bb2716f94b7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a3a7b2830dd7e174142d33bb2716f94b7">rgb_state</a> = false</td></tr>
<tr class="separator:a3a7b2830dd7e174142d33bb2716f94b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0654c24f16caff3a93f81f9164cb12db"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfsm__trans__t.html">fsm_trans_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__retina_8c.html#a0654c24f16caff3a93f81f9164cb12db">fsm_trans_retina</a> []</td></tr>
<tr class="memdesc:a0654c24f16caff3a93f81f9164cb12db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transition table for retina FSM.  <br /></td></tr>
<tr class="separator:a0654c24f16caff3a93f81f9164cb12db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Retina FSM main file. </p>
<dl class="section author"><dt>Author</dt><dd>Jose Manuel Bravo Pacheco </dd>
<dd>
VictorGarcia Garcia </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22/02/2023 </dd></dl>

<p class="definition">Definition in file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1493910690d9420cf8b135851ed55211" name="a1493910690d9420cf8b135851ed55211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1493910690d9420cf8b135851ed55211">&#9670;&#160;</a></span>COMMANDS_MEMORY_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMANDS_MEMORY_SIZE&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of NEC commands stored in the memory of the system Retina </p>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00018">18</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="adf764cbdea00d65edcd07bb9953ad2b7" name="adf764cbdea00d65edcd07bb9953ad2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf764cbdea00d65edcd07bb9953ad2b7">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460" name="adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460"></a>WAIT_TX&#160;</td><td class="fielddoc"><p>State to wait in transmission mode </p>
</td></tr>
<tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308" name="adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308"></a>WAIT_RX&#160;</td><td class="fielddoc"><p>State to wait in receiver mode </p>
</td></tr>
<tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e" name="adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e"></a>SLEEP_TX&#160;</td><td class="fielddoc"><p>State to be sleeping in transmission mode </p>
</td></tr>
<tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8" name="adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8"></a>SLEEP_RX&#160;</td><td class="fielddoc"><p>State to be sleeping in reception mode </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00025">25</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa92912b6265f7b5ea279a89d65672079" name="aa92912b6265f7b5ea279a89d65672079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92912b6265f7b5ea279a89d65672079">&#9670;&#160;</a></span>_process_rgb_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _process_rgb_code </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rgb_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the color from the code that is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rgb_id</td><td>Identification of the RGB LED </td></tr>
    <tr><td class="paramname">code</td><td>Code received </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00057">57</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a46c30b8fcfe5b740e745e9b664e872eb" name="a46c30b8fcfe5b740e745e9b664e872eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c30b8fcfe5b740e745e9b664e872eb">&#9670;&#160;</a></span>check_activity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool check_activity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if any sub fsm is having any activity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an fsm_retina struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00187">187</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a27791bcb353fd9bf513cf1fb124a84d5" name="a27791bcb353fd9bf513cf1fb124a84d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27791bcb353fd9bf513cf1fb124a84d5">&#9670;&#160;</a></span>check_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if there is a new code in the infrared receiver FSM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00140">140</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a831d11281556c3d19f17da6088ff7fec" name="a831d11281556c3d19f17da6088ff7fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831d11281556c3d19f17da6088ff7fec">&#9670;&#160;</a></span>check_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_error </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if there has been received an erroneous code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00173">173</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a659bcc80451aef1447a2b9084a8e7b68" name="a659bcc80451aef1447a2b9084a8e7b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a659bcc80451aef1447a2b9084a8e7b68">&#9670;&#160;</a></span>check_long_pressed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_long_pressed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the button has been pressed long to change between transmitter and receiver modes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00126">126</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a2aa51c060ad3f32d64ac0e22a4ce333e" name="a2aa51c060ad3f32d64ac0e22a4ce333e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aa51c060ad3f32d64ac0e22a4ce333e">&#9670;&#160;</a></span>check_no_activity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool check_no_activity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the oposite of check_activity function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an fsm_retina struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00201">201</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a6e569115408f9427a03aad6f4b067bb2" name="a6e569115408f9427a03aad6f4b067bb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e569115408f9427a03aad6f4b067bb2">&#9670;&#160;</a></span>check_repetition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_repetition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if there has been a repetition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00159">159</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="aa252d6804822c94f8c46898a5c70a255" name="aa252d6804822c94f8c46898a5c70a255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa252d6804822c94f8c46898a5c70a255">&#9670;&#160;</a></span>check_short_pressed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_short_pressed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the button has been pressed fast to send a new command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00112">112</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a5f95fb7d2a6655ee7897d0506a294994" name="a5f95fb7d2a6655ee7897d0506a294994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f95fb7d2a6655ee7897d0506a294994">&#9670;&#160;</a></span>do_discard_rx_and_reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_discard_rx_and_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Discard and reset the code of the infrared receiver FSM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00305">305</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="adaadcd4455f8b57c0cd0b3d7fdea7f43" name="adaadcd4455f8b57c0cd0b3d7fdea7f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaadcd4455f8b57c0cd0b3d7fdea7f43">&#9670;&#160;</a></span>do_execute_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_execute_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Actuate according to the code received. </p>
<p>This function can be used to act to the RGB LED or any other hardware.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00239">239</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a06d0fd454021efb6078f8daa758ef465" name="a06d0fd454021efb6078f8daa758ef465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d0fd454021efb6078f8daa758ef465">&#9670;&#160;</a></span>do_execute_repetition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_execute_repetition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Actuate accordingly when receiving a repetition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00291">291</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a1db678242efba8b80d622d06faa27978" name="a1db678242efba8b80d622d06faa27978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1db678242efba8b80d622d06faa27978">&#9670;&#160;</a></span>do_rx_off_tx_on()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_rx_off_tx_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switch the system to transmitter mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00274">274</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="ae7660e69573bbf3e75ac151864e165b0" name="ae7660e69573bbf3e75ac151864e165b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7660e69573bbf3e75ac151864e165b0">&#9670;&#160;</a></span>do_send_next_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_send_next_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmit the next code stored in memory after a short button press. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00214">214</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="abbd17f5bad9f9634896d218e11b2e0f5" name="abbd17f5bad9f9634896d218e11b2e0f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbd17f5bad9f9634896d218e11b2e0f5">&#9670;&#160;</a></span>do_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the low power mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00317">317</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="afa65b37d943170fb5357a1f6de4c4d1f" name="afa65b37d943170fb5357a1f6de4c4d1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa65b37d943170fb5357a1f6de4c4d1f">&#9670;&#160;</a></span>do_tx_off_rx_on()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_tx_off_rx_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switch the system to receiver mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00257">257</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a9f48e93526d839640780ab9fbf699a3b" name="a9f48e93526d839640780ab9fbf699a3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f48e93526d839640780ab9fbf699a3b">&#9670;&#160;</a></span>fsm_retina_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_retina_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>button_press_time_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fms_tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rgb_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the infrared transmitter FSM. </p>
<p>This function initializes the default values of the FSM struct. On the basic version of Retina, it does not have HW (such as status LEDs, as in example); in thtat case, this fuction must call to the port to initialize the HW associated</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__retina__t.html" title="Structure to define the Retina FSM.">fsm_retina_t</a>. </td></tr>
    <tr><td class="paramname">p_fsm_button</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains a <a class="el" href="structfsm__button__t.html" title="Struct to define the FSM of a button.">fsm_button_t</a> </td></tr>
    <tr><td class="paramname">button_press_time_ms</td><td>Duration in ms of the button press to change between transmitter and receiver modes. </td></tr>
    <tr><td class="paramname">p_fms_tx</td><td>Pointer to an <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains an <a class="el" href="structfsm__tx__t.html" title="Struct to define the TX FSM.">fsm_tx_t</a> </td></tr>
    <tr><td class="paramname">p_fsm_rx</td><td>Pointer to an fms_t struct that contains an <a class="el" href="structfsm__tx__t.html" title="Struct to define the TX FSM.">fsm_tx_t</a> </td></tr>
    <tr><td class="paramname">rgb_id</td><td>Identification number for the RGB </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00352">352</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a56250a78299de778b68bb8e59e09d76a" name="a56250a78299de778b68bb8e59e09d76a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56250a78299de778b68bb8e59e09d76a">&#9670;&#160;</a></span>fsm_retina_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__t.html">fsm_t</a> * fsm_retina_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>button_press_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rgb_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new RETINA FSM. </p>
<p>This FSM is the mains state machine of the Retina system that governs the interaction between the otrher state machines of the system: button, trasmitter ans receiver FSM.</p>
<p>-The FSM starts in the WAIT RX state and checks if the button has been pressed for more than button_press_time_ms ms. If so, it goes to the WAIT_TX state to wait to transmit. -When in the WAIT TX state, it checks if the button has been pressed for more than button_press_time_ms ms. If so, it goes to the WAIT RX state to wait to receive. -Being in WAIT RX or WAIT TX, if no machine has any activity (neither the button's FSM, nor the transmitter's, nor the receiver's), it goes to low power mode SLEEP RX or SLEEP TX, respectively. -While in SLEEP RX or SLEEP TX, it checks that no machine has activity, and, by means of an autotransition, it goes to sleep. These autotransitions are used to avoid staying awake by any interruption from other elements than ours, or the debugger. -When waking up by one of our system elements, being in SLEEP RX or SLEEP TX, it will always switch (check_true()) to WAIT RX or WAIT TX, respectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm_button</td><td>User button fsm </td></tr>
    <tr><td class="paramname">button_press_time</td><td>Duration in ms of the button press to change between transmitter and receiver modes. </td></tr>
    <tr><td class="paramname">p_fsm_tx</td><td>Infrared transmitter FSM </td></tr>
    <tr><td class="paramname">p_fsm_rx</td><td>Pointer to a <a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a> struct that contains a <a class="el" href="structfsm__rx__t.html" title="Struct to define the RX FSM.">fsm_rx_t</a>. </td></tr>
    <tr><td class="paramname">rgb_id</td><td>Identification number for the RGB.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsm_t* </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00345">345</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="abcab6b8f411c244c4ac5a445f0f735f3" name="abcab6b8f411c244c4ac5a445f0f735f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcab6b8f411c244c4ac5a445f0f735f3">&#9670;&#160;</a></span>color_mem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t color_mem = 0x0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Memory space with the last color when turned off the leds </p>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00021">21</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a0654c24f16caff3a93f81f9164cb12db" name="a0654c24f16caff3a93f81f9164cb12db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0654c24f16caff3a93f81f9164cb12db">&#9670;&#160;</a></span>fsm_trans_retina</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> fsm_trans_retina[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#aa252d6804822c94f8c46898a5c70a255">check_short_pressed</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#ae7660e69573bbf3e75ac151864e165b0">do_send_next_msg</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a659bcc80451aef1447a2b9084a8e7b68">check_long_pressed</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#afa65b37d943170fb5357a1f6de4c4d1f">do_tx_off_rx_on</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a2aa51c060ad3f32d64ac0e22a4ce333e">check_no_activity</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e">SLEEP_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#abbd17f5bad9f9634896d218e11b2e0f5">do_sleep</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e">SLEEP_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a2aa51c060ad3f32d64ac0e22a4ce333e">check_no_activity</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e">SLEEP_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#abbd17f5bad9f9634896d218e11b2e0f5">do_sleep</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e">SLEEP_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a46c30b8fcfe5b740e745e9b664e872eb">check_activity</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a>, NULL},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a27791bcb353fd9bf513cf1fb124a84d5">check_code</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#adaadcd4455f8b57c0cd0b3d7fdea7f43">do_execute_code</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a6e569115408f9427a03aad6f4b067bb2">check_repetition</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a06d0fd454021efb6078f8daa758ef465">do_execute_repetition</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a831d11281556c3d19f17da6088ff7fec">check_error</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a5f95fb7d2a6655ee7897d0506a294994">do_discard_rx_and_reset</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a659bcc80451aef1447a2b9084a8e7b68">check_long_pressed</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a1db678242efba8b80d622d06faa27978">do_rx_off_tx_on</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a2aa51c060ad3f32d64ac0e22a4ce333e">check_no_activity</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8">SLEEP_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#abbd17f5bad9f9634896d218e11b2e0f5">do_sleep</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8">SLEEP_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a2aa51c060ad3f32d64ac0e22a4ce333e">check_no_activity</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8">SLEEP_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#abbd17f5bad9f9634896d218e11b2e0f5">do_sleep</a>},</div>
<div class="line">    {<a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8">SLEEP_RX</a>, <a class="code hl_function" href="fsm__retina_8c.html#a46c30b8fcfe5b740e745e9b664e872eb">check_activity</a>, <a class="code hl_enumvalue" href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a>, NULL},</div>
<div class="line">    {-1, NULL, -1, NULL}}</div>
<div class="ttc" id="afsm__retina_8c_html_a06d0fd454021efb6078f8daa758ef465"><div class="ttname"><a href="fsm__retina_8c.html#a06d0fd454021efb6078f8daa758ef465">do_execute_repetition</a></div><div class="ttdeci">static void do_execute_repetition(fsm_t *p_this)</div><div class="ttdoc">Actuate accordingly when receiving a repetition.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00291">fsm_retina.c:291</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a1db678242efba8b80d622d06faa27978"><div class="ttname"><a href="fsm__retina_8c.html#a1db678242efba8b80d622d06faa27978">do_rx_off_tx_on</a></div><div class="ttdeci">static void do_rx_off_tx_on(fsm_t *p_this)</div><div class="ttdoc">Switch the system to transmitter mode.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00274">fsm_retina.c:274</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a27791bcb353fd9bf513cf1fb124a84d5"><div class="ttname"><a href="fsm__retina_8c.html#a27791bcb353fd9bf513cf1fb124a84d5">check_code</a></div><div class="ttdeci">static bool check_code(fsm_t *p_this)</div><div class="ttdoc">Check if there is a new code in the infrared receiver FSM.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00140">fsm_retina.c:140</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a2aa51c060ad3f32d64ac0e22a4ce333e"><div class="ttname"><a href="fsm__retina_8c.html#a2aa51c060ad3f32d64ac0e22a4ce333e">check_no_activity</a></div><div class="ttdeci">bool check_no_activity(fsm_t *p_this)</div><div class="ttdoc">Returns the oposite of check_activity function.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00201">fsm_retina.c:201</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a46c30b8fcfe5b740e745e9b664e872eb"><div class="ttname"><a href="fsm__retina_8c.html#a46c30b8fcfe5b740e745e9b664e872eb">check_activity</a></div><div class="ttdeci">bool check_activity(fsm_t *p_this)</div><div class="ttdoc">Checks if any sub fsm is having any activity.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00187">fsm_retina.c:187</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a5f95fb7d2a6655ee7897d0506a294994"><div class="ttname"><a href="fsm__retina_8c.html#a5f95fb7d2a6655ee7897d0506a294994">do_discard_rx_and_reset</a></div><div class="ttdeci">static void do_discard_rx_and_reset(fsm_t *p_this)</div><div class="ttdoc">Discard and reset the code of the infrared receiver FSM.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00305">fsm_retina.c:305</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a659bcc80451aef1447a2b9084a8e7b68"><div class="ttname"><a href="fsm__retina_8c.html#a659bcc80451aef1447a2b9084a8e7b68">check_long_pressed</a></div><div class="ttdeci">static bool check_long_pressed(fsm_t *p_this)</div><div class="ttdoc">Check if the button has been pressed long to change between transmitter and receiver modes.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00126">fsm_retina.c:126</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a6e569115408f9427a03aad6f4b067bb2"><div class="ttname"><a href="fsm__retina_8c.html#a6e569115408f9427a03aad6f4b067bb2">check_repetition</a></div><div class="ttdeci">static bool check_repetition(fsm_t *p_this)</div><div class="ttdoc">Check if there has been a repetition.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00159">fsm_retina.c:159</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_a831d11281556c3d19f17da6088ff7fec"><div class="ttname"><a href="fsm__retina_8c.html#a831d11281556c3d19f17da6088ff7fec">check_error</a></div><div class="ttdeci">static bool check_error(fsm_t *p_this)</div><div class="ttdoc">Check if there has been received an erroneous code.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00173">fsm_retina.c:173</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_aa252d6804822c94f8c46898a5c70a255"><div class="ttname"><a href="fsm__retina_8c.html#aa252d6804822c94f8c46898a5c70a255">check_short_pressed</a></div><div class="ttdeci">static bool check_short_pressed(fsm_t *p_this)</div><div class="ttdoc">Check if the button has been pressed fast to send a new command.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00112">fsm_retina.c:112</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_abbd17f5bad9f9634896d218e11b2e0f5"><div class="ttname"><a href="fsm__retina_8c.html#abbd17f5bad9f9634896d218e11b2e0f5">do_sleep</a></div><div class="ttdeci">void do_sleep(fsm_t *p_this)</div><div class="ttdoc">Start the low power mode.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00317">fsm_retina.c:317</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_adaadcd4455f8b57c0cd0b3d7fdea7f43"><div class="ttname"><a href="fsm__retina_8c.html#adaadcd4455f8b57c0cd0b3d7fdea7f43">do_execute_code</a></div><div class="ttdeci">static void do_execute_code(fsm_t *p_this)</div><div class="ttdoc">Actuate according to the code received.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00239">fsm_retina.c:239</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e"><div class="ttname"><a href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a1ed7efe6469eb2a449a2ff9d22f6fc9e">SLEEP_TX</a></div><div class="ttdeci">@ SLEEP_TX</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00029">fsm_retina.c:29</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8"><div class="ttname"><a href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a23afc23f75cb4a787e0ed942ed2ee6f8">SLEEP_RX</a></div><div class="ttdeci">@ SLEEP_RX</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00030">fsm_retina.c:30</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460"><div class="ttname"><a href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a40343b646b045e2d3029021122dc3460">WAIT_TX</a></div><div class="ttdeci">@ WAIT_TX</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00027">fsm_retina.c:27</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308"><div class="ttname"><a href="fsm__retina_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a7bc7af0ae548dcff8d0bd8eb7e6c8308">WAIT_RX</a></div><div class="ttdeci">@ WAIT_RX</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00028">fsm_retina.c:28</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_ae7660e69573bbf3e75ac151864e165b0"><div class="ttname"><a href="fsm__retina_8c.html#ae7660e69573bbf3e75ac151864e165b0">do_send_next_msg</a></div><div class="ttdeci">static void do_send_next_msg(fsm_t *p_this)</div><div class="ttdoc">Transmit the next code stored in memory after a short button press.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00214">fsm_retina.c:214</a></div></div>
<div class="ttc" id="afsm__retina_8c_html_afa65b37d943170fb5357a1f6de4c4d1f"><div class="ttname"><a href="fsm__retina_8c.html#afa65b37d943170fb5357a1f6de4c4d1f">do_tx_off_rx_on</a></div><div class="ttdeci">static void do_tx_off_rx_on(fsm_t *p_this)</div><div class="ttdoc">Switch the system to receiver mode.</div><div class="ttdef"><b>Definition:</b> <a href="fsm__retina_8c_source.html#l00257">fsm_retina.c:257</a></div></div>
</div><!-- fragment -->
<p>Transition table for retina FSM. </p>
<div class="image">
<img src="fsm_retina.png" alt=""/>
</div>
 
<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00328">328</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
<a id="a3a7b2830dd7e174142d33bb2716f94b7" name="a3a7b2830dd7e174142d33bb2716f94b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a7b2830dd7e174142d33bb2716f94b7">&#9670;&#160;</a></span>rgb_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rgb_state = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Variable to save the state of the rgb led (For a better implementation this should be placed on port_rgb file) </p>

<p class="definition">Definition at line <a class="el" href="fsm__retina_8c_source.html#l00022">22</a> of file <a class="el" href="fsm__retina_8c_source.html">fsm_retina.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_4e4d22e38ca4e2e8207825ee2d00bc54.html">src</a></li><li class="navelem"><a class="el" href="fsm__retina_8c.html">fsm_retina.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
