<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retina: recepciÃ³n y transmisiÃ³n de infrarrojos: RETINA CONTROLLER Y CONVOICE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Retina: recepciÃ³n y transmisiÃ³n de infrarrojos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">RETINA CONTROLLER Y CONVOICE </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a>El proyecto RETINA consiste en un controlador por infrarrojo para enviar y recibir seÃ±ales de esta naturaleza. Se dispone de controles mediante botones y un controlador de voz para emplear con luces LED RGB, aunque puede ser extendido a cualquier dispositivo que acepte esta comunicaciÃ³n. AdemÃ¡s, se puede conectar un panel LCD para disponer de trazas (la flag LCD_CONNECTED debe ser activada en el <a class="el" href="retina_8h.html" title="Header for retina.c file.">retina.h</a>)</p>
<p>Este proyecto dispone de dos versiones:</p><ul>
<li>Placa STM32F446RE: Se dispone de un mando con botonera reprogramable. El mando puede recibir seÃ±ales de hasta 5 mandos distintos y guardarlos en su memoria. El mando inicia en modo transmisiÃ³n, y mediante la pulsaciÃ³n larga del botÃ³n de usuario, este cambia para guardar los comandos que reciba. TambiÃ©n se puede configurar para que en receptor maneje un led conectado.</li>
<li>Placa STM32F411-DISCO: En este modelo, ademÃ¡s de lo anterior, se puede activar el control de voz. Para utilizarlo, se debe decir la palabra de activaciÃ³n: "Oye Retina", a continuaciÃ³n, puedes decir un comando de los que se aportan en el anexo de este fichero.</li>
</ul>
<p>Puedes acceder al vÃ­deo del demostrador del proyecto pinchando en la imagen:</p>
<p><a href="https://youtu.be/4zYQlVsk_SM" title="Demostrador del proyecto Retina y ConVoice"><div class="image">
<img src="miniatura_video.png" alt=""/>
<div class="caption">
Demostrador del proyecto Retina y ConVoice</div></div>
     </a></p>
<p>Incluya la carpeta <code>retina-main</code> en la carpeta sdg. Esta carpeta incluye los drivers necesarios para la ejecuciÃ³n del sistema. Cabe recalcar que para utilizar la STM32F411-DISCO hace falta aÃ±adir otra carpeta con los drivers extra necesarios.</p>
<div class="fragment"><div class="line">ğŸ“‚sdg</div>
<div class="line">â”£ ğŸ“‚drivers</div>
<div class="line">â”ƒ â”£ ğŸ“‚stm32f4xx</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚CMSIS</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”— ğŸ“‚Drivers</div>
<div class="line">â”ƒ â”— ğŸ“‚stm32f411</div>
<div class="line">â”ƒ     â”£ ğŸ“‚CMSIS</div>
<div class="line">â”ƒ     â”£ ğŸ“‚BSP</div>
<div class="line">â”ƒ     â”— ğŸ“‚STM32F4xx_HAL_Driver</div>
<div class="line">â”£ ğŸ“‚projects</div>
<div class="line">â”ƒ â”£ ğŸ“¦projects.code-workspace</div>
<div class="line">â”ƒ â”£ ğŸ“‚hello</div>
<div class="line">â”ƒ â”£ ğŸ“‚blink</div>
<div class="line">â”ƒ â”£ ğŸ“‚retina</div>
<div class="line">â”ƒ â”ƒ â”£ ğŸ“‚.vscode    </div>
<div class="line">â”ƒ â”ƒ â”ƒ â”£ ğŸ“œlaunch.json</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”— ğŸ“œtasks.json</div>
<div class="line">â”ƒ â”ƒ â”£ ğŸ“‚common</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚include</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚src</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”— ğŸ“œMakefile.common</div>
<div class="line">â”ƒ â”ƒ â”£ ğŸ“‚port</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚nucleo_stm32f446re</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚include</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚src</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œSTM32F446RETx_FLASH.ld</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œMakefile.port</div>
<div class="line">â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œopenocd.cfg</div>
<div class="line">â”ƒ â”ƒ â”£ ğŸ“‚lib</div>
<div class="line">â”ƒ â”ƒ â”— ğŸ“œMakefile</div>
<div class="line">â”ƒ â”ƒ â”— ...</div>
<div class="line">â”ƒ â”— ...</div>
<div class="line">â”—</div>
</div><!-- fragment --><p>Dispone de toda la API generada mediante doxygen con el archivo <a href="docs/html/index.html">index.html</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
ConfiguraciÃ³n y funcionamiento del sistema</h1>
<p>El sistema puede correr en varias configuraciones mediante la modificaciÃ³n de ciertas variables ubicadas en las cabeceras. Existe un ajuste global, el control de la pantalla LCD, estÃ¡ se puede habilitar o desahibilitar poniendo a true/false la variable <code>LCD_CONNECTED</code> del fichero <code><a class="el" href="retina_8h.html" title="Header for retina.c file.">retina.h</a></code>. El resto de ajustes dependen del harware utilizado:</p>
<h2><a class="anchor" id="autotoc_md2"></a>
STM32F446</h2>
<p>En esta placa estÃ¡n disponibles dos principales versiones, que se alternan variando la variable <code>VERSION</code> del fichero <code><a class="el" href="retina_8h.html" title="Header for retina.c file.">retina.h</a></code>:</p><ul>
<li>Version 4: En esta versiÃ³n se dispone del sistema retina en su versiÃ³n base: Transmisor al encender, con 3 comandos que se suceden al presionar el botÃ³n user; y un modo receptor, activado al mantener dicho botÃ³n. En este Ãºltimo modo, el usuario puede controlar con un mando el led rgb conectado a la placa.</li>
<li><p class="startli">Version 5: En esta versiÃ³n se disponen todas la mejoras del sistema. Se amplÃ­a el mando, ofreciendo la posibilidad de conectar varios botones configurables. Por defecto el sistema tiene tres botones (variable <code>NUMBER_BUTTONS</code> en el fichero <code><a class="el" href="fsm__retina__v2_8h.html" title="Header for fsm_retina_v2.c file.">fsm_retina_v2.h</a></code>): el primero es el botÃ³n de encendido del sistema, el segundo es el botÃ³n de cambio de mando y cambio de modo, y el resto son botones de funciÃ³n configurables. Como se ha mencionado, esta versiÃ³n dispone de la posibilidad de grabar hasta 5 mandos (aumentable si fuese necesario). Estos mandos pueden ser configurados por software o grabados mediante la funciÃ³n receptora.</p>
<p class="startli">Para grabar un mando con el modo recepciÃ³n se ha de seguir los siguientes pasos:</p><ol type="1">
<li>Entrar en modo recepciÃ³n manteniendo pulsado el botÃ³n 1.</li>
<li>Con el mando a querer copiar ir pulsando los distintos comandos que queramos grabar en el orden deseado. Cuando se haya detectado un comando nuevo el led verde parpaderÃ¡ indicando que ha sido recibido.</li>
<li>Al enviar todos los comandos para llenar todos los botones, el sistema cambiarÃ¡ automaticamente a modo transmisiÃ³n y se habilitarÃ¡ el nuevo mando en el menÃº.</li>
</ol>
</li>
</ul>
<blockquote class="doxtable">
<p>&zwj;<b>Warning</b> </p>
</blockquote>
<p>Cuando se quiera utilizar esta placa, la variable <code>PICOVOICE_ACTIVE</code> debe estar a <em>false</em></p>
<hr  />
<h2><a class="anchor" id="autotoc_md4"></a>
STM32F411</h2>
<p>Con esta placa, ademÃ¡s de todo lo anterior, se puede activar el sistema de control por voz. Es importante recalcar que estos sistemas son incompatibles, es decir, no es posible disponer del mando con botones y del control por voz simultÃ¡neamente. Para configurar el sistema solo hace falta poner la variable <code>PICOVOICE_ACTIVE = true</code> en el archivo <code><a class="el" href="retina_8h.html" title="Header for retina.c file.">retina.h</a></code>.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Comandos por voz</h1>
<p>La placa puede ser configurada para utilizar cualquier comando por voz, las instrucciones detalladas se encuentran en <a href="https://console.picovoice.ai/">Picovoice Instructions</a>.</p>
<p>En esta versiÃ³n viene un modelo de lenguaje con los siguientes comandos:</p>
<ul>
<li>Palabra de activaciÃ³n: <b>Oye retina</b></li>
<li>Comandos de control:<ul>
<li>Encendido y apagado de luces:<ol type="1">
<li>Enciende las luces de la placa.</li>
<li>Apaga las luces de la placa.</li>
<li>Enciende las luces de la tira.</li>
<li>Apaga las luces de la tira.</li>
</ol>
</li>
<li>Contro de colores:<ol type="1">
<li>Haz que la luz de la placa sea @color</li>
<li>Haz que la luz de la tira sea @color</li>
</ol>
</li>
</ul>
</li>
</ul>
<blockquote class="doxtable">
<p>&zwj;<b>Note</b> </p>
</blockquote>
<p>Por defecto si no se le dice que luz quieres cambiar el programa usarÃ¡ el transmisor infrarrojo para realizar el comando. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
